# 智能計算頁面功能檢查清單

## 📋 基本功能檢查

### 1. 頁面加載和認證

- [ ] 頁面可以正常加載
- [ ] 用戶認證檢查正常工作
- [ ] 未登錄用戶會被重定向到登錄頁面
- [ ] 已登錄用戶可以正常訪問頁面
- [ ] Header 和 Footer 正確顯示

### 2. 基本信息輸入

- [ ] 聚會名稱輸入框正常工作
- [ ] 日期選擇器正常工作（默認為今天）
- [ ] 地點輸入框正常工作
- [ ] 小費比例輸入框正常工作（0-100%）
- [ ] 付款人選擇下拉菜單正常工作

### 3. 參與者管理

- [ ] 可以添加新參與者
- [ ] 可以刪除參與者
- [ ] 參與者名稱可以編輯
- [ ] 參與者 ID 正確生成
- [ ] 參與者標籤正確顯示

### 4. 消費項目管理

- [ ] 可以添加新項目
- [ ] 可以刪除項目
- [ ] 項目名稱和金額可以編輯
- [ ] 共享項目選項正常工作
- [ ] 項目參與者選擇正常工作
- [ ] 參與者標籤在項目中正確顯示

### 5. 計算功能

- [ ] 開始計算按鈕正常工作
- [ ] 計算結果正確顯示
- [ ] 平均分攤計算正確
- [ ] 部分參與計算正確
- [ ] 小費計算正確
- [ ] 付款人邏輯正確

### 6. 結果顯示

- [ ] 計算結果模態框正確顯示
- [ ] 每個參與者的應付金額正確
- [ ] 總金額計算正確
- [ ] 付款人顯示正確
- [ ] 結果可以保存
- [ ] 結果可以打印（JPG 截圖）

## 🔧 技術功能檢查

### 1. API 端點測試

- [ ] `/api/bill/calculate` - 計算賬單
- [ ] `/api/bill/save` - 保存賬單
- [ ] `/api/user/search` - 搜索用戶
- [ ] `/api/auth/me` - 獲取用戶信息

### 2. 數據驗證

- [ ] 必填字段驗證
- [ ] 數字格式驗證
- [ ] 參與者數量驗證
- [ ] 項目數量驗證
- [ ] 金額範圍驗證

### 3. 錯誤處理

- [ ] 網絡錯誤處理
- [ ] 認證錯誤處理
- [ ] 數據格式錯誤處理
- [ ] 計算錯誤處理

### 4. 用戶體驗

- [ ] 加載狀態顯示
- [ ] 錯誤消息顯示
- [ ] 成功消息顯示
- [ ] 響應式設計
- [ ] 鍵盤導航支持

## 🧪 測試用例

### 測試用例 1: 基本平均分攤

```
參與者: A, B, C
項目: 餐費 300元（共享）
預期結果: A=100, B=100, C=100
```

### 測試用例 2: 部分參與

```
參與者: A, B, C
項目: 餐費 300元（僅A, B參與）
預期結果: A=150, B=150, C=0
```

### 測試用例 3: 多項目混合

```
參與者: A, B, C
項目1: 餐費 300元（共享）
項目2: 飲料 60元（僅A, B參與）
預期結果: A=160, B=160, C=100
```

### 測試用例 4: 小費計算

```
參與者: A, B, C
項目: 餐費 300元（共享）
小費: 10%
預期結果: A=110, B=110, C=110
```

### 測試用例 5: 付款人邏輯

```
參與者: A, B, C
項目: 餐費 300元（共享）
付款人: A
預期結果: A支付300元，B欠A 100元，C欠A 100元
```

## 🚨 常見問題檢查

### 1. 數據同步問題

- [ ] 參與者刪除後，項目中的參與者標籤正確更新
- [ ] 參與者名稱修改後，項目中的標籤正確更新
- [ ] 項目刪除後，參與者標籤正確更新

### 2. 計算精度問題

- [ ] 小數點計算精度正確
- [ ] 四捨五入處理正確
- [ ] 總金額與分項金額一致

### 3. 界面問題

- [ ] 模態框正確顯示和關閉
- [ ] 按鈕狀態正確更新
- [ ] 表單驗證提示正確顯示

### 4. 性能問題

- [ ] 大量參與者時性能正常
- [ ] 大量項目時性能正常
- [ ] 計算響應時間合理

## 📊 測試報告模板

```
測試日期: ___________
測試人員: ___________
測試環境: ___________

基本功能測試:
- 頁面加載: ✅/❌
- 認證檢查: ✅/❌
- 基本信息: ✅/❌
- 參與者管理: ✅/❌
- 項目管理: ✅/❌
- 計算功能: ✅/❌
- 結果顯示: ✅/❌

技術功能測試:
- API端點: ✅/❌
- 數據驗證: ✅/❌
- 錯誤處理: ✅/❌
- 用戶體驗: ✅/❌

測試用例結果:
- 測試用例1: ✅/❌
- 測試用例2: ✅/❌
- 測試用例3: ✅/❌
- 測試用例4: ✅/❌
- 測試用例5: ✅/❌

發現的問題:
1. ___________
2. ___________
3. ___________

建議改進:
1. ___________
2. ___________
3. ___________
```

## 🔄 自動化測試

使用測試頁面 `test-calculator.html` 進行自動化測試：

1. 訪問 `http://localhost:3000/test-calculator.html`
2. 確保已登錄
3. 點擊"運行所有測試"按鈕
4. 查看測試結果和統計
5. 根據結果修復問題

## 📝 維護建議

1. **定期測試**: 每次代碼更新後運行完整測試
2. **邊界測試**: 測試極端情況（0 個參與者、超大金額等）
3. **兼容性測試**: 在不同瀏覽器中測試
4. **性能監控**: 監控計算響應時間
5. **用戶反饋**: 收集用戶使用反饋並改進
