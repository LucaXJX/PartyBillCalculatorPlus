# æ¶ˆæ¯ç³»çµ±æ¸¬è©¦æŒ‡å—

## ğŸ¯ æ§åˆ¶å°æ¸¬è©¦å‘½ä»¤

æˆ‘å·²ç¶“ç‚ºä½ å‰µå»ºäº†ä¸€å¥—å®Œæ•´çš„æ§åˆ¶å°æ¸¬è©¦å‘½ä»¤ï¼Œè®“ä½ å¯ä»¥è¼•é¬†æ¸¬è©¦å®šæ™‚æç¤ºçš„æ¶ˆæ¯åŠŸèƒ½ã€‚

### ğŸ“‹ å¿«é€Ÿé–‹å§‹

1. **æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·** (F12)
2. **åˆ‡æ›åˆ° Console æ¨™ç±¤**
3. **ç¢ºä¿å·²ç™»éŒ„** åˆ°æ‡‰ç”¨
4. **è¼¸å…¥æ¸¬è©¦å‘½ä»¤**

### ğŸ”§ å¯ç”¨æ¸¬è©¦å‘½ä»¤

#### ğŸ“– æŸ¥çœ‹å¹«åŠ©
```javascript
testMessageSystem.help()
```
é¡¯ç¤ºæ‰€æœ‰å¯ç”¨çš„æ¸¬è©¦å‘½ä»¤å’Œèªªæ˜ã€‚

#### ğŸ” åŸºæœ¬æ¸¬è©¦å‘½ä»¤

**æ¸¬è©¦é€¾æœŸæé†’åŠŸèƒ½**ï¼š
```javascript
testMessageSystem.testOverdue()
```
- æ‰‹å‹•è§¸ç™¼é€¾æœŸæé†’æª¢æŸ¥
- æª¢æŸ¥æ˜¯å¦æœ‰é€¾æœŸæœªæ”¯ä»˜çš„è³¬å–®
- ç™¼é€é€¾æœŸæé†’æ¶ˆæ¯

**ç²å–æ‰€æœ‰æ¶ˆæ¯**ï¼š
```javascript
testMessageSystem.getMessages()
```
- ç²å–ç•¶å‰ç”¨æˆ¶çš„æ‰€æœ‰æ¶ˆæ¯
- é¡¯ç¤ºæ¶ˆæ¯è©³æƒ…å’Œç‹€æ…‹

**æ‰‹å‹•è§¸ç™¼è¼ªè©¢**ï¼š
```javascript
testMessageSystem.triggerPolling()
```
- ç«‹å³æª¢æŸ¥æœªè®€æ¶ˆæ¯æ•¸é‡
- æ›´æ–°é é¢å³ä¸Šè§’çš„æœªè®€å¾½ç« 

#### ğŸ“¤ ç™¼é€æ¸¬è©¦æ¶ˆæ¯

**ç™¼é€é»˜èªæ¸¬è©¦æ¶ˆæ¯**ï¼š
```javascript
testMessageSystem.sendMessage()
```

**ç™¼é€ä¸åŒé¡å‹çš„æ¶ˆæ¯**ï¼š
```javascript
// ç™¼é€ä¿¡æ¯æ¶ˆæ¯
testMessageSystem.sendMessage('info', 'é€™æ˜¯ä¸€æ¢ä¿¡æ¯æ¶ˆæ¯')

// ç™¼é€è­¦å‘Šæ¶ˆæ¯
testMessageSystem.sendMessage('warning', 'é€™æ˜¯ä¸€æ¢è­¦å‘Šæ¶ˆæ¯')

// ç™¼é€éŒ¯èª¤æ¶ˆæ¯
testMessageSystem.sendMessage('error', 'é€™æ˜¯ä¸€æ¢éŒ¯èª¤æ¶ˆæ¯')

// ç™¼é€æˆåŠŸæ¶ˆæ¯
testMessageSystem.sendMessage('success', 'é€™æ˜¯ä¸€æ¢æˆåŠŸæ¶ˆæ¯')
```

#### âœ… æ¶ˆæ¯æ“ä½œ

**æ¨™è¨˜æ¶ˆæ¯ç‚ºå·²è®€**ï¼š
```javascript
// é¦–å…ˆç²å–æ¶ˆæ¯åˆ—è¡¨
const messages = await testMessageSystem.getMessages()

// æ¨™è¨˜ç¬¬ä¸€æ¢æ¶ˆæ¯ç‚ºå·²è®€
testMessageSystem.markRead(messages[0].id)
```

#### â° è¼ªè©¢æ§åˆ¶

**è¨­ç½®è¼ªè©¢é–“éš”**ï¼š
```javascript
// è¨­ç½®5ç§’è¼ªè©¢é–“éš”ï¼ˆç”¨æ–¼å¿«é€Ÿæ¸¬è©¦ï¼‰
testMessageSystem.setPolling(5)

// è¨­ç½®30ç§’è¼ªè©¢é–“éš”ï¼ˆæ­£å¸¸é–“éš”ï¼‰
testMessageSystem.setPolling(30)

// è¨­ç½®1åˆ†é˜è¼ªè©¢é–“éš”
testMessageSystem.setPolling(60)
```

**åœæ­¢è¼ªè©¢**ï¼š
```javascript
testMessageSystem.stopPolling()
```

### ğŸ§ª æ¸¬è©¦å ´æ™¯

#### å ´æ™¯1ï¼šæ¸¬è©¦é€¾æœŸæé†’
```javascript
// 1. æ¸¬è©¦é€¾æœŸæé†’åŠŸèƒ½
await testMessageSystem.testOverdue()

// 2. æŸ¥çœ‹æ˜¯å¦ç”Ÿæˆäº†é€¾æœŸæé†’æ¶ˆæ¯
await testMessageSystem.getMessages()

// 3. æ‰‹å‹•è§¸ç™¼è¼ªè©¢æŸ¥çœ‹æœªè®€æ•¸é‡
await testMessageSystem.triggerPolling()
```

#### å ´æ™¯2ï¼šæ¸¬è©¦æ¶ˆæ¯ç™¼é€å’Œè¼ªè©¢
```javascript
// 1. è¨­ç½®å¿«é€Ÿè¼ªè©¢ï¼ˆ5ç§’é–“éš”ï¼‰
testMessageSystem.setPolling(5)

// 2. ç™¼é€æ¸¬è©¦æ¶ˆæ¯
await testMessageSystem.sendMessage('warning', 'æ¸¬è©¦è­¦å‘Šæ¶ˆæ¯')

// 3. ç­‰å¾…å¹¾ç§’å¾Œæª¢æŸ¥æ¶ˆæ¯
setTimeout(async () => {
  await testMessageSystem.getMessages()
}, 6000)

// 4. åœæ­¢å¿«é€Ÿè¼ªè©¢
testMessageSystem.stopPolling()
```

#### å ´æ™¯3ï¼šæ¸¬è©¦æ¶ˆæ¯æ¨™è¨˜ç‚ºå·²è®€
```javascript
// 1. ç²å–æ‰€æœ‰æ¶ˆæ¯
const messages = await testMessageSystem.getMessages()

// 2. æ¨™è¨˜ç¬¬ä¸€æ¢æœªè®€æ¶ˆæ¯ç‚ºå·²è®€
if (messages.length > 0) {
  await testMessageSystem.markRead(messages[0].id)
}

// 3. å†æ¬¡ç²å–æ¶ˆæ¯æŸ¥çœ‹ç‹€æ…‹è®ŠåŒ–
await testMessageSystem.getMessages()
```

### ğŸ“Š é æœŸçµæœ

#### é€¾æœŸæé†’æ¸¬è©¦
- âœ… æ§åˆ¶å°é¡¯ç¤ºï¼š`ğŸ” æ¸¬è©¦é€¾æœŸæé†’åŠŸèƒ½...`
- âœ… å¦‚æœæœ‰é€¾æœŸè³¬å–®ï¼Œæœƒç”Ÿæˆæé†’æ¶ˆæ¯
- âœ… æ§åˆ¶å°é¡¯ç¤ºï¼š`âœ… é€¾æœŸæé†’æª¢æŸ¥å®Œæˆ: {çµ±è¨ˆä¿¡æ¯}`

#### æ¶ˆæ¯ç™¼é€æ¸¬è©¦
- âœ… æ§åˆ¶å°é¡¯ç¤ºï¼š`ğŸ“¤ ç™¼é€æ¸¬è©¦æ¶ˆæ¯ (é¡å‹): å…§å®¹`
- âœ… æ§åˆ¶å°é¡¯ç¤ºï¼š`âœ… æ¸¬è©¦æ¶ˆæ¯ç™¼é€æˆåŠŸ: {æ¶ˆæ¯è©³æƒ…}`
- âœ… é é¢å³ä¸Šè§’æœªè®€å¾½ç« æ•¸å­—å¢åŠ 

#### è¼ªè©¢æ¸¬è©¦
- âœ… æ§åˆ¶å°é¡¯ç¤ºï¼š`ğŸ”„ æ‰‹å‹•è§¸ç™¼è¼ªè©¢...`
- âœ… æ§åˆ¶å°é¡¯ç¤ºï¼š`âœ… å·²å•Ÿå‹•æœªè®€æ¶ˆæ¯è¼ªè©¢ï¼Œé–“éš” X ç§’`
- âœ… é é¢å³ä¸Šè§’æœªè®€å¾½ç« æœƒå®šæœŸæ›´æ–°

### ğŸš¨ å¸¸è¦‹å•é¡Œ

#### å•é¡Œ1ï¼šå‘½ä»¤æœªå®šç¾©
**éŒ¯èª¤**ï¼š`testMessageSystem is not defined`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºä¿é é¢å·²å®Œå…¨åŠ è¼‰
2. åˆ·æ–°é é¢é‡æ–°åŠ è¼‰è…³æœ¬
3. æª¢æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰ JavaScript éŒ¯èª¤

#### å•é¡Œ2ï¼šèªè­‰å¤±æ•—
**éŒ¯èª¤**ï¼š`âŒ èªè­‰å¤±æ•—ï¼Œå·²é‡å®šå‘`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºä¿å·²ç™»éŒ„åˆ°æ‡‰ç”¨
2. æª¢æŸ¥ç™»éŒ„ç‹€æ…‹ï¼š`window.authManager.isAuthenticated()`
3. é‡æ–°ç™»éŒ„

#### å•é¡Œ3ï¼šAPI è«‹æ±‚å¤±æ•—
**éŒ¯èª¤**ï¼š`âŒ æ¸¬è©¦æ¶ˆæ¯ç™¼é€å¤±æ•—: 500`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥æœå‹™å™¨æ˜¯å¦æ­£åœ¨é‹è¡Œ
2. æŸ¥çœ‹æœå‹™å™¨æ§åˆ¶å°éŒ¯èª¤æ—¥èªŒ
3. æª¢æŸ¥ç¶²çµ¡é€£æ¥

### ğŸ’¡ æ¸¬è©¦æŠ€å·§

1. **çµ„åˆæ¸¬è©¦**ï¼šå¯ä»¥çµ„åˆå¤šå€‹å‘½ä»¤é€²è¡Œè¤‡é›œæ¸¬è©¦
2. **å®šæ™‚æ¸¬è©¦**ï¼šä½¿ç”¨ `setTimeout` ä¾†æ¸¬è©¦å®šæ™‚åŠŸèƒ½
3. **ç‹€æ…‹æª¢æŸ¥**ï¼šåœ¨æ¸¬è©¦å‰å¾Œæª¢æŸ¥æ¶ˆæ¯ç‹€æ…‹è®ŠåŒ–
4. **éŒ¯èª¤è™•ç†**ï¼šæ•…æ„ç™¼é€éŒ¯èª¤æ•¸æ“šæ¸¬è©¦éŒ¯èª¤è™•ç†

### ğŸ“ ç¤ºä¾‹æ¸¬è©¦è…³æœ¬

```javascript
// å®Œæ•´çš„æ¶ˆæ¯ç³»çµ±æ¸¬è©¦è…³æœ¬
async function fullMessageTest() {
  console.log("ğŸš€ é–‹å§‹å®Œæ•´æ¶ˆæ¯ç³»çµ±æ¸¬è©¦...");
  
  // 1. æ¸¬è©¦é€¾æœŸæé†’
  console.log("1ï¸âƒ£ æ¸¬è©¦é€¾æœŸæé†’...");
  await testMessageSystem.testOverdue();
  
  // 2. ç™¼é€æ¸¬è©¦æ¶ˆæ¯
  console.log("2ï¸âƒ£ ç™¼é€æ¸¬è©¦æ¶ˆæ¯...");
  await testMessageSystem.sendMessage('info', 'æ¸¬è©¦æ¶ˆæ¯1');
  await testMessageSystem.sendMessage('warning', 'æ¸¬è©¦æ¶ˆæ¯2');
  
  // 3. ç²å–æ¶ˆæ¯åˆ—è¡¨
  console.log("3ï¸âƒ£ ç²å–æ¶ˆæ¯åˆ—è¡¨...");
  const messages = await testMessageSystem.getMessages();
  console.log("æ¶ˆæ¯ç¸½æ•¸:", messages.length);
  
  // 4. è¨­ç½®å¿«é€Ÿè¼ªè©¢
  console.log("4ï¸âƒ£ è¨­ç½®å¿«é€Ÿè¼ªè©¢...");
  testMessageSystem.setPolling(3);
  
  // 5. ç­‰å¾…ä¸¦æª¢æŸ¥
  setTimeout(async () => {
    console.log("5ï¸âƒ£ æª¢æŸ¥è¼ªè©¢æ•ˆæœ...");
    await testMessageSystem.triggerPolling();
    
    // 6. åœæ­¢è¼ªè©¢
    console.log("6ï¸âƒ£ åœæ­¢è¼ªè©¢...");
    testMessageSystem.stopPolling();
    
    console.log("âœ… å®Œæ•´æ¸¬è©¦å®Œæˆï¼");
  }, 5000);
}

// é‹è¡Œå®Œæ•´æ¸¬è©¦
fullMessageTest();
```

---

**ä½¿ç”¨æç¤º**ï¼š
- æ‰€æœ‰å‘½ä»¤éƒ½æ˜¯ç•°æ­¥çš„ï¼Œä½¿ç”¨ `await` æˆ– `.then()` è™•ç†çµæœ
- æŸ¥çœ‹æ§åˆ¶å°è¼¸å‡ºäº†è§£è©³ç´°çš„åŸ·è¡Œéç¨‹
- å¯ä»¥éš¨æ™‚ä½¿ç”¨ `testMessageSystem.help()` æŸ¥çœ‹å‘½ä»¤åˆ—è¡¨
