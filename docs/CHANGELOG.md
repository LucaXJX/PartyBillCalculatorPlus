# 更新日誌

本文件記錄了 PartyBillCalculator 項目的所有重要變更。

格式基於 [Keep a Changelog](https://keepachangelog.com/zh-TW/1.0.0/)，
本項目遵循 [語義化版本](https://semver.org/lang/zh-TW/)。

## [未發布]

### 計劃中的功能

- GitHub Actions CI/CD 工作流
- 自動化測試套件
- Docker 容器化部署
- PostgreSQL 數據庫遷移
- 多語言支持（英文、簡體中文）

## [2.0.0] - 2025-10-13

### ✨ 新增

- **認證系統升級**

  - 實現完整的用戶認證管理器 (`AuthManager`)
  - 添加會話驗證和自動重定向功能
  - 實現頁面級別的訪問控制（public/protected/auth）
  - 添加用戶狀態自動更新

- **賬單管理增強**

  - 添加「我的賬單」頁面，支持查看創建的和參與的賬單
  - 實現支付狀態追蹤（待支付/已支付）
  - 支持上傳支付憑證（最多 6 張圖片）
  - 添加收款確認和拒絕功能
  - 實現賬單搜索和多狀態篩選（5 種狀態）
  - 添加應收款/應付款統計卡片（6 個統計指標）

- **UI/UX 改進**
  - 重新設計組件系統（統一的卡片樣式）
  - 添加響應式導航欄
  - 實現圖片預覽和管理功能
  - 優化移動端體驗

### 🔄 變更

- **架構重構**

  - 將認證邏輯模組化到 `auth.js`
  - 統一組件樣式到 `components.js`
  - 改進服務器端路由保護機制

- **數據結構**
  - 擴展賬單數據模型以支持支付狀態
  - 添加收據圖片存儲功能
  - 改進參與者數據結構

### 🐛 修復

- 修復用戶登出後頁面重定向問題
- 解決會話過期時的自動重定向循環
- 修復賬單計算中的小費分配錯誤
- 糾正參與者列表更新延遲問題

### 🔐 安全

- 實現服務器端會話驗證
- 添加 API 端點認證保護
- 改進密碼處理安全性
- 實現用戶數據隔離

### 📚 文檔

- 添加認證系統升級文檔 (`AUTH_SYSTEM_UPGRADE.md`)
- 創建「我的賬單」頁面實現文檔 (`MY_BILLS_PAGE.md`)
- 更新組件系統文檔 (`COMPONENT_SYSTEM.md`)
- 添加測試用戶列表 (`TEST_USERS.md`)

## [1.5.0] - 2025-10-10

### ✨ 新增

- **消息系統**

  - 實現實時消息通知功能
  - 添加消息列表和詳情頁面
  - 支持消息標記為已讀

- **付款人功能**
  - 添加指定付款人功能
  - 實現付款人視圖和管理

### 🔄 變更

- 優化賬單計算算法
- 改進數據持久化機制

### 📚 文檔

- 添加消息系統文檔 (`MESSAGE_SYSTEM.md`)
- 創建支付流程文檔 (`PAYMENT_FLOW.md`)

## [1.0.0] - 2025-10-01

### ✨ 新增

- **核心功能**

  - 實現基本的賬單分攤計算
  - 用戶註冊和登入功能
  - 參與者管理
  - 消費項目管理
  - 小費計算

- **用戶界面**

  - 創建響應式首頁
  - 實現計算器頁面
  - 設計登入和註冊頁面

- **後端服務**
  - 搭建 Express.js 服務器
  - 實現 RESTful API
  - JSON 文件數據存儲

### 📚 文檔

- 創建 README.md
- 添加 CONTRIBUTING.md
- 創建 LICENSE (MIT)
- 添加 API 文檔

## [0.5.0] - 2025-09-20

### ✨ 新增

- 項目初始化
- 基本項目結構
- 依賴配置

---

## 版本說明

### 語義化版本格式

- **主版本號 (MAJOR)**：不兼容的 API 變更
- **次版本號 (MINOR)**：向下兼容的功能新增
- **修訂號 (PATCH)**：向下兼容的問題修正

### 變更類型

- `Added` - ✨ 新增功能
- `Changed` - 🔄 功能變更
- `Deprecated` - ⚠️ 即將移除的功能
- `Removed` - 🗑️ 已移除的功能
- `Fixed` - 🐛 Bug 修復
- `Security` - 🔐 安全性修復

---

**注意**：本更新日誌記錄了項目的主要變更。詳細的提交歷史請參閱 [GitHub 提交記錄](https://github.com/LucaXJX/PartyBillCalculator/commits/)。
